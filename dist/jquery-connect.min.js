(function() {
function getInitAction(f,a){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(t){return t};if(!a)throw new Error("$.fn.connect: no store provided");var e=window.jQuery;return function(){var o=e(this),r=n.bind(this),c=a.dispatch.bind(a),i=void 0;function t(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=a.getState(),e=r(n,c);!t&&void 0!==i&&shallowEqual(e,i)||(i=void 0===e?null:e,o.data("jConnect_sideEffectsCounter",0),f.bind(o)(e),o.removeData("jConnect_sideEffectsCounter"))}return o.data({jConnect_sideEffects:[],jConnect_render:t}),a.subscribe(t),t()}}function getRerenderAction(){var t=window.jQuery;return function(){t(this).data("jConnect_render")(!0)}}function getSideEffectAction(o,r){var c=window.jQuery;return function(){var t=c(this),n=t.data("jConnect_sideEffectsCounter");if(void 0===n)throw new Error('$.fn.connect: cannot call "sideEffect" outside $.fn.connect lifeccycle.');var e=t.data("jConnect_sideEffects");n in e&&shallowEqual(e[n].depenencies,r)||(e[n]&&e[n].callback&&e[n].callback.bind(this)(),e[n]={dependencies:r,callback:o.bind(this)()}),t.data("jConnect_sideEffectsCounter",n+1)}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function is(t,n){return t===n?0!==t||0!==n||1/t==1/n:"function"==typeof t&&"function"==typeof n?t.toString()===n.toString():t!=t&&n!=n}function shallowEqual(t,n){if(is(t,n))return!0;if("object"!==_typeof(t)||null===t||"object"!==_typeof(n)||null===n)return!1;var e=Object.keys(t),o=Object.keys(n);if(e.length!==o.length)return!1;for(var r=0;r<e.length;r++)if(!Object.prototype.hasOwnProperty.call(n,e[r])||!is(t[e[r]],n[e[r]]))return!1;return!0}window.jQuery.fn.connect=function(t,n,e){var o;if("function"==typeof t)o=getInitAction(t,n,e);else switch(t){case"rerender":o=getRerenderAction();break;case"sideEffect":o=getSideEffectAction(n,e);break;default:throw new Error('$.fn.connect: do not recognize action "'.concat(t,'"'))}return this.each(o)};
})();
